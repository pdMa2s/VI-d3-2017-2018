<!DOCTYPE html>
<meta charset="utf-8">
<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <!-- I recommend you host this file on your own, since this will change without warning -->
  <script src="http://datamaps.github.io/scripts/datamaps.world.min.js?v=1"></script>
  <h2>Datamaps Playground</h2>
  <p><a href="http://datamaps.github.io/">DataMaps Project Homepage</a></p>
  <div id="container1" style="position: relative; width: 80%; max-height: 450px;"></div>
  <script>
    function processCountryNames(name){
      switch (name) {
        case "United States":
          return "United States of America";
          break;
        case "Slovak Republic":
          return "Slovakia";
          break;
        case "Tanzania":
          return "United Republic of Tanzania";
          break;
        case "Guinea-Bissau":
          return "Guinea Bissau";
          break;
        case "Serbia":
          return "Republic of Serbia";
          break;
        case "Bosnia-Herzegovina":
          return "Bosnia and Herzegovina";
          break;
        case "Kosovo":
          return "Kosovo";
          break;
        default:
          return name;
      }
    }
  </script>

     <script>
     var terroristData = {}
     var countries = Datamap.prototype.worldTopo.objects.world.geometries;
     var mapColors = {}

     d3.csv("relevant_terrorist.csv", function(data){
       data.forEach(function(element) {
         terroristData[processCountryNames(element.country_txt)] = element;
       });
       console.log(terroristData);
       for (var i = 0, j = countries.length; i < j; i++) {
         console.log(countries[i].properties.name);
         //console.log(terroristData[countries[i].properties.name]);
         if(terroristData[countries[i].properties.name] != null){
            mapColors[countries[i].id] = {fillKey: 'red'}
         }
         else{
           mapColors[countries[i].id] = {fillKey: 'noData'}
         }

       }
       var map = new Datamap({
         scope: 'world',
         element: document.getElementById('container1'),
         projection: 'mercator',
         height: 500,
         fills: {
           defaultFill: '#f0a0fa',
           noData: '#6E6E6E',
           blue: 'blue',
           red: 'red'
         },
         data : mapColors
        });
     });
     //console.log(terroristData);
     //console.log(terroristData["Afghanistan"]);

     /**/

     //
     //console.log(map.data)
       //basic map config with custom fills, mercator projection




     </script>
</body>
